{"ast":null,"code":"var _jsxFileName = \"D:\\\\LABS\\\\5-semestr(and_variant)\\\\Veb\\\\src\\\\MODSEN\\\\books-search\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { fetchBooks } from './utils/api'; // Импортируем функцию для работы с API\nimport SearchForm from './components/SearchForm';\nimport BookCard from './components/BookCard';\nimport Pagination from './components/Pagination';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [books, setBooks] = useState([]);\n  const [query, setQuery] = useState('');\n  const [category, setCategory] = useState('all');\n  const [sort, setSort] = useState('relevance');\n  const [loading, setLoading] = useState(false);\n  const [totalItems, setTotalItems] = useState(0);\n  const [startIndex, setStartIndex] = useState(0);\n  const [error, setError] = useState(null);\n  const handleSearch = useCallback(async () => {\n    if (!query) return;\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await fetchBooks(query, category, sort, startIndex);\n      setBooks(prevBooks => [...prevBooks, ...data.items]); // Добавляем книги в список\n      setTotalItems(data.totalItems);\n      setLoading(false);\n    } catch (err) {\n      setError('Произошла ошибка при загрузке данных.');\n      setLoading(false);\n    }\n  }, [query, category, sort, startIndex]);\n  const loadMoreBooks = () => {\n    setStartIndex(prevIndex => prevIndex + 30); // Пагинация: увеличиваем индекс\n  };\n  useEffect(() => {\n    if (query) {\n      handleSearch();\n    }\n  }, [query, category, sort, startIndex, handleSearch]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(SearchForm, {\n      query: query,\n      setQuery: setQuery,\n      category: category,\n      setCategory: setCategory,\n      sort: sort,\n      setSort: setSort\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [totalItems, \" \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u043E\\u0432\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: books.map(book => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4\",\n          children: /*#__PURE__*/_jsxDEV(BookCard, {\n            book: book\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 15\n          }, this)\n        }, book.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), totalItems > books.length && /*#__PURE__*/_jsxDEV(Pagination, {\n        onLoadMore: loadMoreBooks\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"pMcn/Pz1WemJJk00OOvS2t/C6CY=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","fetchBooks","SearchForm","BookCard","Pagination","jsxDEV","_jsxDEV","App","_s","books","setBooks","query","setQuery","category","setCategory","sort","setSort","loading","setLoading","totalItems","setTotalItems","startIndex","setStartIndex","error","setError","handleSearch","data","prevBooks","items","err","loadMoreBooks","prevIndex","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","book","id","length","onLoadMore","_c","$RefreshReg$"],"sources":["D:/LABS/5-semestr(and_variant)/Veb/src/MODSEN/books-search/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { fetchBooks } from './utils/api'; // Импортируем функцию для работы с API\nimport SearchForm from './components/SearchForm';\nimport BookCard from './components/BookCard';\nimport Pagination from './components/Pagination';\n\nfunction App() {\n  const [books, setBooks] = useState([]);\n  const [query, setQuery] = useState('');\n  const [category, setCategory] = useState('all');\n  const [sort, setSort] = useState('relevance');\n  const [loading, setLoading] = useState(false);\n  const [totalItems, setTotalItems] = useState(0);\n  const [startIndex, setStartIndex] = useState(0);\n  const [error, setError] = useState(null);\n\n  const handleSearch = useCallback(async () => {\n    if (!query) return;\n\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await fetchBooks(query, category, sort, startIndex);\n      setBooks((prevBooks) => [...prevBooks, ...data.items]); // Добавляем книги в список\n      setTotalItems(data.totalItems);\n      setLoading(false);\n    } catch (err) {\n      setError('Произошла ошибка при загрузке данных.');\n      setLoading(false);\n    }\n  }, [query, category, sort, startIndex]);\n\n  const loadMoreBooks = () => {\n    setStartIndex((prevIndex) => prevIndex + 30); // Пагинация: увеличиваем индекс\n  };\n\n  useEffect(() => {\n    if (query) {\n      handleSearch();\n    }\n  }, [query, category, sort, startIndex, handleSearch]);\n\n  return (\n    <div className=\"container\">\n      <SearchForm\n        query={query}\n        setQuery={setQuery}\n        category={category}\n        setCategory={setCategory}\n        sort={sort}\n        setSort={setSort}\n      />\n      {loading && <div>Загрузка...</div>}\n      {error && <div className=\"error\">{error}</div>}\n      <div>\n        <h3>{totalItems} результатов</h3>\n        <div className=\"row\">\n          {books.map((book) => (\n            <div className=\"col-md-4\" key={book.id}>\n              <BookCard book={book} />\n            </div>\n          ))}\n        </div>\n        {totalItems > books.length && (\n          <Pagination onLoadMore={loadMoreBooks} />\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}